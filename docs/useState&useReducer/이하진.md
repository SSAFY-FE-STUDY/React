# [State Hooks] useState | useReducer
## State Hooks
- Stateë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ëŠ” ì •ë³´ë¥¼ "ê¸°ì–µ"í•  ìˆ˜ ìˆë‹¤.

## 1. useState
### `useState(initialState)`
**[ë§¤ê°œë³€ìˆ˜]**
- `initialState`: stateì˜ ì´ˆê¸° ì„¤ì •ê°’ (ì´ˆê¸° ë Œë”ë§ ì´í›„ì—ëŠ” ë¬´ì‹œ)

**[ë°˜í™˜ê°’]**
1. ë Œë”ë§ ê°„ì— ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ **state ë³€ìˆ˜**
2. ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•˜ë„ë¡ ìœ ë°œí•˜ëŠ” **state setter í•¨ìˆ˜**

### `setSomething(nextState)`
**[ë§¤ê°œë³€ìˆ˜]**
- `nextState`: stateê°€ ë  ê°’. í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ ì—…ë°ì´í„° í•¨ìˆ˜ë¡œ ì·¨ê¸‰

**[ë°˜í™˜ê°’]**
- ì—†ìŒ

**[ì£¼ì˜ì‚¬í•­]**
1. `set` í•¨ìˆ˜ëŠ” ë‹¤ìŒ ë Œë”ë§ì— ëŒ€í•œ state ë³€ìˆ˜ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤. `set` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ í›„ì—ë„ state ë³€ìˆ˜ì—ëŠ” í˜¸ì¶œ ì „ ê°’ì´ ë‹´ê²¨ìˆë‹¤.
```javascript
const [name, setName] = useState('Apple');

const onClickedChangeName = () => {
  	console.log('name: ', name);	// Apple
	setName('Apple Mango');
  	console.log('name: ', name);	// Apple
}
```
2. ìƒˆë¡œìš´ ê°’ì´ `Object.is`ë¡œ ë¹„êµí•´ ë´¤ì„ ë•Œ í˜„ì¬ `state` ê°’ê³¼ ë™ì¼í•˜ë‹¤ê³  íŒë‹¨ë˜ë©´, ReactëŠ” í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ ë° ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë¦¬ë Œë”ë§ í•˜ì§€ ì•ŠëŠ”ë‹¤. (ğŸ‘‰ ìµœì í™”)
3. ReactëŠ” state ì—…ë°ì´íŠ¸ë¥¼ batchí•œë‹¤. ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ê³  `set` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ í›„ì— í™”ë©´ì„ ì—…ë°ì´íŠ¸í•œë‹¤.
	**- state ì—…ë°ì´íŠ¸ í**
    1. `setState` í˜¸ì¶œ ì‹œ: ìƒíƒœ ì—…ë°ì´íŠ¸ ìš”ì²­ì€ React ë‚´ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” íì— ì €ì¥ëœë‹¤. **íëŠ” ì»´í¬ë„ŒíŠ¸ë³„ë¡œ ê´€ë¦¬**ëœë‹¤. `setState`ê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ë©´ ê·¸ ê°’ë“¤ì´ ìˆœì°¨ì ìœ¼ë¡œ íì— ìŒ“ì¸ë‹¤.
    2. ë°°ì¹˜ ì²˜ë¦¬: ReactëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ ìš”ì²­ì„ ê°€ëŠ¥í•œ ëª¨ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ë°°ì¹˜(batch) ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í•œ í•¨ìˆ˜ ë‚´ì— `setState`ê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ë”ë¼ë„ ReactëŠ” ëª¨ë“  ìƒíƒœ ë³€ê²½ì„ ëª¨ì•„ í•œ ë²ˆì˜ ë Œë”ë§ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. ì´ë¥¼ í†µí•´ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê³ , ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ë°©ì§€í•œë‹¤.
    3. ì—…ë°ì´íŠ¸ ì‹¤í–‰: ReactëŠ” ë Œë”ë§ ì‚¬ì´í´ ì¤‘ ìŒ“ì¸ íë¥¼ ì²˜ë¦¬í•˜ì—¬ ìƒíƒœë¥¼ í•œ ë²ˆì— ì—…ë°ì´íŠ¸í•˜ê³ , ë³€ê²½ëœ ìƒíƒœì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¬ë Œë”ë§í•œë‹¤.
    
```javascript
// ì—…ë°ì´íŠ¸ í
export function getFinalState(baseState, queue) {
  let finalState = baseState;

  for(let update of queue) {
    if(typeof update === 'function') {
      finalState = update(finalState);
    } else {
      finalState = update;
    }
  }    
}
```

## 1.1. useStateë¥¼ JSë¡œ êµ¬í˜„í•´ë³´ì!
```javascript
const MyReact = (function MyReact() {
  // ë‹¤ì¤‘ state ê´€ë¦¬
  const memorizedStates = []
  const isInitialized = []
  
  let cursor = 0
 
  function useState(initialValue = "") {
  	const { forceUpdate } = useForceUpdate();
    
    // ì´ˆê¸°í™”
    if(!isInitialized[cursor]) {
      memorizedStates[cursor] = initialValue
      isInitialized[cursor] = true
    }
    
    const state = memorizedStates[cursor]
    
    const setStateAt = _cursor => nextState => {
      if(state === nextState) return
      memorizedState[_cursor] = nextState
      forceUpdate()
    }
    
    const setState = setStateAt(cursor)
    cursor = cursor + 1
    
    return [state, setState]
  }
	
  // êµ¬í˜„ì„ ìœ„í•´ ë¦¬ì•¡íŠ¸ í›… ì‚¬ìš©
  function useForceUpdate() {
  	const [value, setValue] = React.useState(1);
    const forceUpdate = () => {
      setValue(value+1)
      cursor = 0
    }
    return {
      forceUpdate,
    }
  }
})()

```

_ì°¸ê³ : https://jeonghwan-kim.github.io/2023/06/24/lecture-react-season2-part3-ch2_

---
## 2. useReducer
reducerë¼ëŠ” ë§! ì–´ë””ì„œ ë“¤ì–´ë³¸ ì  ì—†ëŠ”ê°€?
ì •ë‹µì€
í•˜ë‚˜
ë‘˜
ì…‹
Redux~~!~!
ê·¸ë ‡ë‹¤, ë¦¬ë•ìŠ¤ì™€ ë™ì‘ ì›ë¦¬ê°€ ë¹„ìŠ·í•˜ë‹¤.
ê·¸ë ‡ë‹¤ë©´ ì–¸ì œ ì™œ ë¦¬ë•ìŠ¤ë¥¼ ì“°ê³  ì–¸ì œ ì™œ useReducerë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤
ê·¸ê±´ ì´ ê¸€ ë§ˆì§€ë§‰ì— ìˆìœ¼ë‹ˆ ëê¹Œì§€ ë§ê´€ë¶€

### `useReducer(reducer, initialArg, init?)`
```javascript
import { useReducer } from 'react';

function reducer(state, action) {};

function MyComponent() {
  const [state, dispatch] = useReducer(reducer, { age: 26 }); 
}
```
**[ë§¤ê°œë³€ìˆ˜]**
- `reducer`: stateê°€ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸ ë˜ëŠ”ì§€ ì§€ì •í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜. ë°˜ë“œì‹œ ìˆœìˆ˜ í•¨ìˆ˜ì—¬ì•¼ í•˜ë©°, stateì™€ actionì„ ì¸ìˆ˜ë¡œ ë°›ì•„ì•¼ í•˜ê³ , ë‹¤ìŒ stateë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.
- `initialArg`: ì´ˆê¸° stateê°€ ê³„ì‚°ë˜ëŠ” ê°’
- ì„ íƒì‚¬í•­ `init`: ì´ˆê¸° stateë¥¼ ë°˜í™˜í•˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜

**[ë°˜í™˜ê°’]**
1. í˜„ì¬ state
2. `dispatch` í•¨ìˆ˜: `dispatch`ëŠ” stateë¥¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚¨ë‹¤.

### `dispatch í•¨ìˆ˜`
**[ë§¤ê°œë³€ìˆ˜]**
- `action`: ì‚¬ìš©ìì— ì˜í•´ ìˆ˜í–‰ëœ í™œë™

**[ë°˜í™˜ê°’]**
- ì—†ìŒ

## 2.1. useReducer ì˜ˆì‹œ
react ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆëŠ” `useReducer` ì˜ˆì‹œë¥¼ í•œ ë²ˆ ë´…ì‹œë‹¤.
ì˜ˆì‹œë¥¼ ë³´ë©´ ì´í•´í•˜ê¸°ê°€ í›¨ì”¬ ìˆ˜ì›”í•©ë‹ˆë‹¤~!

```javascript
import { useReducer } from 'react';

function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      return {
        name: state.name,
        age: state.age + 1
      };
    }
    case 'changed_name': {
      return {
        name: action.nextName,
        age: state.age
      };
    }
  }
  throw Error('Unknown action: ' + action.type);
}

const initialState = { name: 'Taylor', age: 42 };

export default function Form() {
  const [state, dispatch] = useReducer(reducer, initialState);

  function handleButtonClick() {
    dispatch({ type: 'incremented_age' });
  }

  function handleInputChange(e) {
    dispatch({
      type: 'changed_name',
      nextName: e.target.value
    }); 
  }

  return (
    <>
      <input
        value={state.name}
        onChange={handleInputChange}
      />
      <button onClick={handleButtonClick}>
        Increment age
      </button>
      <p>Hello, {state.name}. You are {state.age}.</p>
    </>
  );
}
```

## 2.2. `useReducer`ì™€ `Redux`
1. ìŠ¤ì½”í”„(ë²”ìœ„)
- `useReducer`: ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ì˜ ë¡œì»¬ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©
- `Redux`: ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
2. ì˜ì¡´ì„± ë° ì„¤ì •
- `useReducer`: ë¦¬ì•¡íŠ¸ ë‚´ì¥ í›…
- `Redux`: ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë³„ë„ì˜ ì„¤ì¹˜ í•„ìš”
3. ìƒíƒœ ì €ì¥ì†Œ
- `useReducer`: ë¡œì»¬ ìƒíƒœë¥¼ ê´€ë¦¬. `useState`ì™€ ë¹„ìŠ·í•œ ë°©ì‹ì´ì§€ë§Œ, ë” ë³µì¡í•œ ìƒíƒœë‚˜ ì—¬ëŸ¬ ìƒíƒœë¥¼ ë” ì‰½ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì•¡ì…˜(action)ê³¼ ë¦¬ë“€ì„œ(reducer) íŒ¨í„´ì„ ì œê³µ
- `Redux`: ì „ì—­ ìƒíƒœ ì €ì¥ì†Œ(store)ë¥¼ ì œê³µí•˜ì—¬, ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¿ë§Œ ì•„ë‹ˆë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì—­ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬
4. ë¯¸ë“¤ì›¨ì–´ì™€ í™•ì¥ì„±
- `useReducer`: ì»´í¬ë„ŒíŠ¸ ë¡œì»¬ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë‹¨ìˆœí•œ ë„êµ¬ë¡œ, ë¯¸ë“¤ì›¨ì–´ë‚˜ ìƒíƒœ ê´€ë¦¬ íë¦„ì„ í™•ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ ë”°ë¡œ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤.
- `Redux`: ë¯¸ë“¤ì›¨ì–´(`redux-thunk`ë‚˜ `redux-saga` ë“±)ë¥¼ í†µí•´ ë¹„ë™ê¸° ì‘ì—…ì„ ì‰½ê²Œ ì²˜ë¦¬í•˜ê³ , ìƒíƒœ ê´€ë¦¬ íë¦„ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
