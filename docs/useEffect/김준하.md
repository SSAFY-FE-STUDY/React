# Side Effectë¥¼ ì²˜ë¦¬í•´ì•¼ í•œë‹¤

**useEffect**ëŠ” ì¼ë°˜ì ìœ¼ë¡œ í•¨ìˆ˜í˜•(Functional) ì»´í¬ë„ŒíŠ¸ì—ì„œ **ë¶€ìˆ˜ íš¨ê³¼(Side Effect)**ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

## Side Effectëž€?

Side EffectëŠ” ì»´í“¨í„° ê³¼í•™ì—ì„œ í•¨ìˆ˜ê°€ ê²°ê³¼ê°’ ì´ì™¸ì— ë‹¤ë¥¸ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

ì´ëŸ¬í•œ ì˜ë¯¸ë¥¼ Reactì˜ ì»´í¬ë„ŒíŠ¸ì— ì ìš©í•œë‹¤ë©´, UIë¥¼ ë Œë”ë§í•˜ëŠ” ìž‘ì—… ì´ì™¸ì˜ ë¶€ìˆ˜ì ì¸ íš¨ê³¼ê°€ ë  ê²ƒì´ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Side Effectì˜ ì˜ˆì‹œëŠ” ì•„ëž˜ì™€ ê°™ë‹¤.

- ì™¸ë¶€ ë°ì´í„° fetching
- ë¸Œë¼ìš°ì € API(window, document ë“±)ì˜ ì‚¬ìš©
- `setTimeout`, `setInterval` ë“±ì˜ íƒ€ì´ë° í•¨ìˆ˜ ì‚¬ìš©

í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ëŸ¬í•œ Side Effectë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ useEffectê°€ ë‚˜ì˜¤ê²Œ ë˜ì—ˆë‹¤. useEffectì˜ Effectê°€ Side Effectë¥¼ ì˜ë¯¸í•œë‹¤.

# useEffect

## Side Effectë¥¼ ì™œ useEffectì—ì„œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œ?

Reactì˜ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•¨ìœ¼ë¡œì¨ ë Œë”ë§ ëœë‹¤.
Side EffectëŠ” ì˜ˆìƒí•  ìˆ˜ ì—†ëŠ” ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. ì´ëŸ¬í•œ Side Effectê°€ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•œë‹¤ë©´ Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•˜ëŠ” ë°ì— ë°©í•´ê°€ ëœë‹¤.

useEffectëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ëª¨ë‘ ë Œë”ë§ ëœ í›„ ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ useEffect ì•ˆì—ì„œëŠ” Side Effect ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.

## useEffect ì‚¬ìš©ë²•

```jsx
useEffect(function, deps?)
```

useEffectëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë‘ ê°€ì§€ ì¸ìžë¥¼ ë°›ëŠ”ë‹¤.

ì²« ë²ˆì§¸ ì¸ìžë¡œ í•¨ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤. ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì´ ì™„ë£Œëœ í›„ ì‹¤í–‰í•  í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.
ë‘ ë²ˆì§¸ ì¸ìžë¡œ ìƒëžµ ê°€ëŠ¥í•œ **ì˜ì¡´ì„± ë°°ì—´(deps)**ì„ ë°›ëŠ”ë‹¤.

### ì˜ì¡´ì„± ë°°ì—´(deps)

ì˜ì¡´ì„± ë°°ì—´ì€ useEffectë¥¼ ì–¸ì œ ì‹¤í–‰í• ì§€ ê²°ì •í•œë‹¤.

ì˜ì¡´ì„± ë°°ì—´ì´ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ useEffectê°€ ì‹¤í–‰ëœë‹¤.

```jsx
useEffect(() => {
  fetchData();
});
```

ì˜ì¡´ì„± ë°°ì—´ì´ ì¡´ìž¬í•œë‹¤ë©´, ì˜ì¡´ì„± ë°°ì—´ì— í¬í•¨ëœ ë³€ìˆ˜ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ useEffectë¥¼ ì‹¤í–‰í•œë‹¤. `Obejct.is` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ì˜ ë³€ê²½ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.
ì˜ì¡´ì„± ë°°ì—´ì´ ë¹ˆ ë°°ì—´ì´ë¼ë©´ ì»´í¬ë„ŒíŠ¸ì˜ ì²« ë Œë”ë§ì—ë§Œ useEffectê°€ ì‹¤í–‰ëœë‹¤.

```jsx
useEffect(() => {
  fetchData(dataId);
}, [dataId]);
```

### í´ë¦°ì—…(clean-up) í•¨ìˆ˜

useEffectëŠ” **í´ë¦°ì—…(clean-up)** í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìžˆë‹¤. useEffectì˜ `return`ì„ í†µí•´ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë  ë•Œ ì–´ë–¤ ë™ìž‘ì„ í•  ê²ƒì¸ì§€ ì •ì˜í•  ìˆ˜ ìžˆë‹¤.
í´ëž˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ `componentDidUnMount`ì™€ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤ê³  í•  ìˆ˜ ìžˆë‹¤.

ì¼ë°˜ì ìœ¼ë¡œ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ì•„ëž˜ì™€ ê°™ë‹¤.

- íƒ€ì´ë° í•¨ìˆ˜ë¥¼ clear í•  ë•Œ
- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•´ì•¼ í•  ë•Œ
- ì›¹ ì†Œì¼“ì˜ ì—°ê²°ì„ ëŠì–´ì•¼ í•  ë•Œ
- ...

## useEffect ì‚¬ìš©ì‹œ ì£¼ì˜í•  ì 

useEffectì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°’ì„ ë°”ê¾¸ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìžˆë‹¤.
ë”°ë¼ì„œ useEffectëŠ” ê¼­ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ë Œë”ë§ ê³¼ì •ì—ì„œ ê³„ì‚°í•  ìˆ˜ ìžˆê±°ë‚˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìžˆëŠ” ìž‘ì—…ì€ useEffect ë°–ì—ì„œ ì‹¤í–‰í•˜ìž.

```jsx
const [a, setA] = useState(0);
const [b, setB] = useState(0);

// âŒ ì´ëŸ¬í•œ ë°©ì‹ì€ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
const [sum, setSum] = useState(0);
useEffect(() => {
  setSum(a + b);
}, [a, b]);
```

```jsx
const [a, setA] = useState(0);
const [b, setB] = useState(0);

// ðŸŸ¢ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ìž. ì–´ì°¨í”¼ ìƒíƒœê°’ì´ ë°”ë€Œë©´ ë¦¬ë Œë”ë§ ë˜ë©´ì„œ sumì´ ì—…ë°ì´íŠ¸ ëœë‹¤.
const sum = a + b;
```

# References

> https://ko.react.dev/learn/escape-hatches
> https://velog.io/@okxooxoo/React-useEffect%EB%8A%94-%EC%99%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C
> https://velog.io/@yeonjin1357/React-Side-Effect-%EA%B7%B8%EB%A6%AC%EA%B3%A0-useEffect
